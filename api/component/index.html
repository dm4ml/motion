
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://dm4ml.github.io/motion/api/component/">
      
      
        <link rel="prev" href="../../examples/nl-query/">
      
      
        <link rel="next" href="../component-instance/">
      
      
      <link rel="icon" href="../../images/logo.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.12">
    
    
      
        <title>Component - Motion Docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.7e359304.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:300,300i,400,400i,700,700i%7CUbuntu+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Ubuntu";--md-code-font:"Ubuntu Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="orange">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#motion.Component" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Motion Docs" class="md-header__button md-logo" aria-label="Motion Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m15 9.9 3 2.1-3 2.1V9.9m-9 0L9 12l-3 2.1V9.9M13 6v12l8.5-6L13 6M4 6v12l8.5-6L4 6Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Motion Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Component
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="orange"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9h-1.9M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69m-9.15 3.96h2.3L12 9l-1.15 3.65Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="orange"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="orange"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/dm4ml/motion" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    dm4ml/motion
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../.." class="md-tabs__link">
          
  
  Getting Started

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../examples/hello-world/" class="md-tabs__link">
          
  
  Examples

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="./" class="md-tabs__link">
          
  
  API Reference

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../tools/dashboard/" class="md-tabs__link">
          
  
  Helpful Tools

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Motion Docs" class="md-nav__button md-logo" aria-label="Motion Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m15 9.9 3 2.1-3 2.1V9.9m-9 0L9 12l-3 2.1V9.9M13 6v12l8.5-6L13 6M4 6v12l8.5-6L4 6Z"/></svg>

    </a>
    Motion Docs
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/dm4ml/motion" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    dm4ml/motion
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Getting Started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Welcome
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/installation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/concepts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Concepts
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Examples
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Examples
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/hello-world/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hello World
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/design-patterns/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Common Design Patterns
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/application/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Orchestrating an Application of Components
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/nl-query/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Querying Data with Natural Language
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    API Reference
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Component
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Component
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#motion.Component" class="md-nav__link">
    <span class="md-ellipsis">
      Component
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Component">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#motion.Component.name" class="md-nav__link">
    <span class="md-ellipsis">
      name
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#motion.Component.params" class="md-nav__link">
    <span class="md-ellipsis">
      params
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#motion.Component.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#motion.Component.serve" class="md-nav__link">
    <span class="md-ellipsis">
      serve
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#motion.Component.update" class="md-nav__link">
    <span class="md-ellipsis">
      update
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#motion.Component.init_state" class="md-nav__link">
    <span class="md-ellipsis">
      init_state
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#motion.Component.__call__" class="md-nav__link">
    <span class="md-ellipsis">
      __call__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#motion.Component.save_state" class="md-nav__link">
    <span class="md-ellipsis">
      save_state
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#motion.Component.load_state" class="md-nav__link">
    <span class="md-ellipsis">
      load_state
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#motion.DiscardPolicy" class="md-nav__link">
    <span class="md-ellipsis">
      DiscardPolicy
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DiscardPolicy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#motion.DiscardPolicy.NONE" class="md-nav__link">
    <span class="md-ellipsis">
      NONE
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#motion.DiscardPolicy.NUM_NEW_UPDATES" class="md-nav__link">
    <span class="md-ellipsis">
      NUM_NEW_UPDATES
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#motion.DiscardPolicy.SECONDS" class="md-nav__link">
    <span class="md-ellipsis">
      SECONDS
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../component-instance/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ComponentInstance
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../props-and-state/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Props and State
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mtable/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MTable
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../application/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Application
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../state-migrator/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    StateMigrator
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Helpful Tools
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Helpful Tools
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/dashboard/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Component Dashboard
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/cli/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CLI
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/migrator/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    State Migrator
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/vis/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Component Flow Visualization
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#motion.Component" class="md-nav__link">
    <span class="md-ellipsis">
      Component
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Component">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#motion.Component.name" class="md-nav__link">
    <span class="md-ellipsis">
      name
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#motion.Component.params" class="md-nav__link">
    <span class="md-ellipsis">
      params
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#motion.Component.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#motion.Component.serve" class="md-nav__link">
    <span class="md-ellipsis">
      serve
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#motion.Component.update" class="md-nav__link">
    <span class="md-ellipsis">
      update
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#motion.Component.init_state" class="md-nav__link">
    <span class="md-ellipsis">
      init_state
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#motion.Component.__call__" class="md-nav__link">
    <span class="md-ellipsis">
      __call__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#motion.Component.save_state" class="md-nav__link">
    <span class="md-ellipsis">
      save_state
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#motion.Component.load_state" class="md-nav__link">
    <span class="md-ellipsis">
      load_state
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#motion.DiscardPolicy" class="md-nav__link">
    <span class="md-ellipsis">
      DiscardPolicy
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DiscardPolicy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#motion.DiscardPolicy.NONE" class="md-nav__link">
    <span class="md-ellipsis">
      NONE
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#motion.DiscardPolicy.NUM_NEW_UPDATES" class="md-nav__link">
    <span class="md-ellipsis">
      NUM_NEW_UPDATES
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#motion.DiscardPolicy.SECONDS" class="md-nav__link">
    <span class="md-ellipsis">
      SECONDS
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


  <h1>Component</h1>

<div class="doc doc-object doc-class">



<h2 id="motion.Component" class="doc doc-heading">
          <code>Component</code>


</h2>


  <div class="doc doc-contents first">

  
      <p>Component class for creating Motion components.
Here are some examples:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:3"><input checked="checked" id="motion.Component--__tabbed_1_1" name="motion.Component--__tabbed_1" type="radio" /><input id="motion.Component--__tabbed_1_2" name="motion.Component--__tabbed_1" type="radio" /><input id="motion.Component--__tabbed_1_3" name="motion.Component--__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="motion.Component--__tabbed_1_1">Basic</label><label for="motion.Component--__tabbed_1_2">Multiple Flows</label><label for="motion.Component--__tabbed_1_3">Batching update operations</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">motion</span> <span class="kn">import</span> <span class="n">Component</span>

<span class="n">AdderComponent</span> <span class="o">=</span> <span class="n">Component</span><span class="p">(</span><span class="s2">&quot;MyAdder&quot;</span><span class="p">)</span>

<span class="nd">@AdderComponent</span><span class="o">.</span><span class="n">init_state</span>
<span class="k">def</span> <span class="nf">setUp</span><span class="p">():</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>

<span class="nd">@AdderComponent</span><span class="o">.</span><span class="n">serve</span><span class="p">(</span><span class="s2">&quot;add&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">plus</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">props</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">state</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">props</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">]</span>

<span class="nd">@AdderComponent</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="s2">&quot;add&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">props</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">props</span><span class="o">.</span><span class="n">serve_result</span><span class="p">}</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">c</span> <span class="o">=</span> <span class="n">AdderComponent</span><span class="p">()</span> <span class="c1"># Create instance of AdderComponent</span>
    <span class="n">c</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;add&quot;</span><span class="p">,</span> <span class="n">props</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span> <span class="n">flush_update</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="c1"># Blocks</span>
    <span class="c1"># until update is done. Resulting state is {&quot;value&quot;: 1}</span>
    <span class="n">c</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;add&quot;</span><span class="p">,</span> <span class="n">props</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">})</span> <span class="c1"># Will return 3, not waiting</span>
    <span class="c1"># for update operation.</span>
    <span class="c1"># Resulting state will eventually be {&quot;value&quot;: 3}</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">motion</span> <span class="kn">import</span> <span class="n">Component</span>

<span class="n">Calculator</span> <span class="o">=</span> <span class="n">Component</span><span class="p">(</span><span class="s2">&quot;MyCalculator&quot;</span><span class="p">)</span>

<span class="nd">@Calculator</span><span class="o">.</span><span class="n">init_state</span>
<span class="k">def</span> <span class="nf">setUp</span><span class="p">():</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>

<span class="nd">@Calculator</span><span class="o">.</span><span class="n">serve</span><span class="p">(</span><span class="s2">&quot;add&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">plus</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">props</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">state</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">props</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">]</span>

<span class="nd">@Calculator</span><span class="o">.</span><span class="n">serve</span><span class="p">(</span><span class="s2">&quot;subtract&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">minus</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">props</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">state</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="n">props</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">]</span>

<span class="nd">@Calculator</span><span class="o">.</span><span class="n">update</span><span class="p">([</span><span class="s2">&quot;add&quot;</span><span class="p">,</span> <span class="s2">&quot;subtract&quot;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">decrement</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">props</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">props</span><span class="o">.</span><span class="n">serve_result</span><span class="p">}</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">c</span> <span class="o">=</span> <span class="n">Calculator</span><span class="p">()</span>
    <span class="n">c</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;add&quot;</span><span class="p">,</span> <span class="n">props</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span> <span class="n">flush_update</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="c1"># Will return 1,</span>
    <span class="c1"># blocking until update is done. Resulting state is {&quot;value&quot;: 1}</span>
    <span class="n">c</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;subtract&quot;</span><span class="p">,</span> <span class="n">props</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span> <span class="n">flush_update</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="c1"># Will return 0, blocking until update is done. Resulting state is #</span>
    <span class="c1"># {&quot;value&quot;: 0}</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">motion</span> <span class="kn">import</span> <span class="n">Component</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">MLMonitor</span> <span class="o">=</span> <span class="n">Component</span><span class="p">(</span><span class="s2">&quot;Monitoring_ML_Component&quot;</span><span class="p">)</span>

<span class="nd">@MLMonitor</span><span class="o">.</span><span class="n">init_state</span>
<span class="k">def</span> <span class="nf">setUp</span><span class="p">():</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;model&quot;</span><span class="p">:</span> <span class="n">YOUR_MODEL_HERE</span><span class="p">,</span>
        <span class="s2">&quot;historical_values&quot;</span><span class="p">:</span> <span class="p">[],</span>
        <span class="s2">&quot;historical_serve_res&quot;</span><span class="p">:</span> <span class="p">[]</span>
    <span class="p">}</span>

<span class="nd">@MLMonitor</span><span class="o">.</span><span class="n">serve</span><span class="p">(</span><span class="s2">&quot;predict&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">predict</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">props</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">state</span><span class="p">[</span><span class="s2">&quot;model&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">props</span><span class="p">[</span><span class="s2">&quot;features&quot;</span><span class="p">])</span>

<span class="nd">@MLMonitor</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="s2">&quot;features&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">monitor</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">props</span><span class="p">):</span>

    <span class="n">values</span> <span class="o">=</span> <span class="n">state</span><span class="p">[</span><span class="s2">&quot;historical_values&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="n">props</span><span class="p">[</span><span class="s2">&quot;features&quot;</span><span class="p">]]</span>
    <span class="n">serve_results</span> <span class="o">=</span> <span class="n">state</span><span class="p">[</span><span class="s2">&quot;historical_serve_res&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="n">props</span><span class="o">.</span><span class="n">serve_result</span><span class="p">]</span>

    <span class="c1"># Check drift every 10 values</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">)</span> <span class="o">==</span> <span class="mi">10</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">YOUR_ANOMALY_ALGORITHM</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">serve_results</span><span class="p">):</span>
            <span class="c1"># Fire an alert</span>
            <span class="n">YOUR_ALERT_FUNCTION</span><span class="p">()</span>
        <span class="n">values</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">serve_results</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;historical_values&quot;</span><span class="p">:</span> <span class="n">values</span><span class="p">,</span>
        <span class="s2">&quot;historical_serve_res&quot;</span><span class="p">:</span> <span class="n">serve_results</span>
    <span class="p">}</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">c</span> <span class="o">=</span> <span class="n">MLMonitor</span><span class="p">()</span> <span class="c1"># Create instance</span>
    <span class="n">c</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;predict&quot;</span><span class="p">,</span> <span class="n">props</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;features&quot;</span><span class="p">:</span> <span class="n">YOUR_FEATURES_HERE</span><span class="p">})</span>
    <span class="c1"># Some alert may be fired in the background!</span>
</code></pre></div>
</div>
</div>
</div>


  

  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="motion.Component.name" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">name</span><span class="p">:</span> <span class="nb">str</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Name of the component.</p>
<p>Example Usage:
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">motion</span> <span class="kn">import</span> <span class="n">Component</span>

<span class="n">MyComponent</span> <span class="o">=</span> <span class="n">Component</span><span class="p">(</span><span class="s2">&quot;MyComponent&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">MyComponent</span><span class="o">.</span><span class="n">name</span><span class="p">)</span> <span class="c1"># Prints &quot;MyComponent&quot;</span>
</code></pre></div></p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>str</code></td>          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Component name.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="motion.Component.params" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">params</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Parameters to use in component functions.</p>
<p>Example Usage:
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">motion</span> <span class="kn">import</span> <span class="n">Component</span>

<span class="n">MyComponent</span> <span class="o">=</span> <span class="n">Component</span><span class="p">(</span>
    <span class="s2">&quot;MyComponent&quot;</span><span class="p">,</span>
    <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;param1&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;param2&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>
<span class="p">)</span>

<span class="nd">@MyComponent</span><span class="o">.</span><span class="n">init_state</span>
<span class="k">def</span> <span class="nf">setUp</span><span class="p">():</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>

<span class="nd">@MyComponent</span><span class="o">.</span><span class="n">serve</span><span class="p">(</span><span class="s2">&quot;add&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">plus</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="c1"># Access params with MyComponent.params[&quot;param_name&quot;]</span>
    <span class="k">return</span> <span class="n">state</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">value</span> <span class="o">+</span> <span class="n">MyComponent</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s2">&quot;param1&quot;</span><span class="p">]</span> <span class="o">+</span>
    <span class="n">MyComponent</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s2">&quot;param2&quot;</span><span class="p">]</span>
</code></pre></div></p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="typing.Dict">Dict</span>[str, <span title="typing.Any">Any</span>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Dict[str, Any]: Parameters dictionary.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>
  </div>

</div>




<div class="doc doc-object doc-function">



<h3 id="motion.Component.__init__" class="doc doc-heading">
          <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">params</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{},</span> <span class="n">cache_ttl</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">DEFAULT_KEY_TTL</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Creates a new Motion component.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>name</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Name of the component.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>params</code></td>
          <td>
                <code><span title="typing.Dict">Dict</span>[str, <span title="typing.Any">Any</span>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Parameters to be accessed by the component. Defaults to {}.
Usage: <code>C.params["param_name"]</code> if C is the Component you
have created.</p>
            </div>
          </td>
          <td>
                <code>{}</code>
          </td>
        </tr>
        <tr>
          <td><code>cache_ttl</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Time to live for cached serve results (seconds).
Defaults to 1 day. Set to 0 to disable caching.</p>
            </div>
          </td>
          <td>
                <code><span title="motion.utils.DEFAULT_KEY_TTL">DEFAULT_KEY_TTL</span></code>
          </td>
        </tr>
    </tbody>
  </table>

  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="motion.Component.serve" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">serve</span><span class="p">(</span><span class="n">keys</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="n">Callable</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Decorator for any serve operation for a flow through the
component. Takes in a string or list of strings that represents the
flow key. If the decorator is called with a list of strings, each
flow key will be mapped to the same serve function.</p>

<details class="2-arguments-required-for-an-serve-operation" open>
  <summary>2 arguments required for an serve operation</summary>
  <ul>
<li><code>state</code>: The current state of the component instance, which is a
    dictionary with string keys and any-type values.</li>
<li><code>props</code>: The properties of the current flow, which is passed via
    the <code>run</code> method of the component instance. You can add to
    the <code>props</code> dictionary in the serve op, and the modified
    <code>props</code> will be passed to the subsequent update ops in the flow.
    Props are short-lived and die after the flow's update op
    finishes.</li>
</ul>
</details>      <p>Components can have multiple serve ops, but no flow key within
the component can have more than one serve op. serve ops should not
modify the state object. If you want to modify the state object, write
an <code>update</code> op for your flow.</p>
<p>Example Usage:
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">motion</span> <span class="kn">import</span> <span class="n">Component</span>

<span class="n">MyComponent</span> <span class="o">=</span> <span class="n">Component</span><span class="p">(</span><span class="s2">&quot;MyComponent&quot;</span><span class="p">)</span>

<span class="nd">@MyComponent</span><span class="o">.</span><span class="n">init_state</span>
<span class="k">def</span> <span class="nf">setUp</span><span class="p">():</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>

<span class="nd">@MyComponent</span><span class="o">.</span><span class="n">serve</span><span class="p">(</span><span class="s2">&quot;add&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">props</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">state</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">props</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">]</span>

<span class="nd">@MyComponent</span><span class="o">.</span><span class="n">serve</span><span class="p">(</span><span class="s2">&quot;multiply&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">multiply</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">props</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">state</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">props</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">]</span>

<span class="n">c</span> <span class="o">=</span> <span class="n">MyComponent</span><span class="p">()</span>
<span class="n">c</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;add&quot;</span><span class="p">,</span> <span class="n">props</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span> <span class="n">flush_update</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="c1"># Returns 1</span>
<span class="n">c</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;multiply&quot;</span><span class="p">,</span> <span class="n">props</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">})</span> <span class="c1"># Returns 2</span>
</code></pre></div></p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>keys</code></td>
          <td>
                <code><span title="typing.Union">Union</span>[str, <span title="typing.List">List</span>[str]]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>String or list of strings that
represent the input keyword(s) for the serve flow.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>Callable</code></td>          <td>
                <code><span title="typing.Callable">Callable</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Decorated serve function.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="motion.Component.update" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">update</span><span class="p">(</span><span class="n">keys</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]],</span> <span class="n">discard_policy</span><span class="p">:</span> <span class="n">DiscardPolicy</span> <span class="o">=</span> <span class="n">DiscardPolicy</span><span class="o">.</span><span class="n">NONE</span><span class="p">,</span> <span class="n">discard_after</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Decorator for any update operations for flows through the
component. Takes in a string or list of strings that represents the
flow key. If the decorator is called with a list of strings, each
flow key will be mapped to the same update operation.</p>

<details class="2-arguments-required-for-a-update-operation" open>
  <summary>2 arguments required for a update operation</summary>
  <ul>
<li><code>state</code>: The current state of the component, represented as a
dictionary.</li>
<li><code>props</code>: The properties of the current flow, which could contain
properties that were added to the <code>props</code> dictionary
in the serve op before this update op. Props are short-lived and
die after the flow's update op finishes.</li>
</ul>
</details>      <p>Components can have multiple update ops, and the same key can also have
multiple update ops. Update functions should return a dictionary
of state updates to be merged with the current state.</p>
<p>See <code>DiscardPolicy</code> for more info on how to expire update operations if
you expect there to be backpressure for an update operation.</p>
<p>Example Usage:
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">motion</span> <span class="kn">import</span> <span class="n">Component</span>

<span class="n">MyComponent</span> <span class="o">=</span> <span class="n">Component</span><span class="p">(</span><span class="s2">&quot;MyComponent&quot;</span><span class="p">)</span>


<span class="nd">@MyComponent</span><span class="o">.</span><span class="n">init_state</span>
<span class="k">def</span> <span class="nf">setUp</span><span class="p">():</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>


<span class="nd">@MyComponent</span><span class="o">.</span><span class="n">serve</span><span class="p">(</span><span class="s2">&quot;multiply&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">multiply</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">props</span><span class="p">):</span>
    <span class="n">props</span><span class="p">[</span><span class="s2">&quot;something&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">state</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">props</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">]</span>


<span class="nd">@MyComponent</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="s2">&quot;multiply&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">multiply</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">props</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">props</span><span class="p">[</span><span class="s2">&quot;something&quot;</span><span class="p">]}</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">c</span> <span class="o">=</span> <span class="n">MyComponent</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span>
        <span class="n">c</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;multiply&quot;</span><span class="p">,</span> <span class="n">props</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">},</span> <span class="n">flush_update</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="p">)</span>  <span class="c1"># Returns 0 and state updates to {&quot;value&quot;: 3}</span>
    <span class="nb">print</span><span class="p">(</span>
        <span class="n">c</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;multiply&quot;</span><span class="p">,</span> <span class="n">props</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">},</span> <span class="n">flush_update</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="p">)</span>  <span class="c1"># Returns 9, update will execute</span>
    <span class="c1"># to get state[&quot;value&quot;] = 4</span>
    <span class="nb">print</span><span class="p">(</span>
        <span class="n">c</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;multiply&quot;</span><span class="p">,</span> <span class="n">props</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">},</span> <span class="n">flush_update</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="p">)</span>  <span class="c1"># Returns 4 * 4 = 16</span>
</code></pre></div></p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>keys</code></td>
          <td>
                <code><span title="typing.Union">Union</span>[str, <span title="typing.List">List</span>[str]]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>String or list of strings that
represent the input keyword(s) for the update flow.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>discard_policy</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="motion.discard_policy.DiscardPolicy" href="#motion.DiscardPolicy">DiscardPolicy</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Policy for expiring
update operations. Defaults to DiscardPolicy.NONE.</p>
            </div>
          </td>
          <td>
                <code><a class="autorefs autorefs-internal" title="motion.discard_policy.DiscardPolicy.NONE" href="#motion.DiscardPolicy.NONE">NONE</a></code>
          </td>
        </tr>
        <tr>
          <td><code>discard_after</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[int]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Number of updates
or seconds after which to expire the update operation.
Defaults to None.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>Callable</code></td>          <td>
                <code><span title="typing.Any">Any</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Decorated update function.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="motion.Component.init_state" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">init_state</span><span class="p">(</span><span class="n">func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Callable</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Decorator for the init_state function. This function
is called once at the beginning of the component's lifecycle.
The decorated function should return a dictionary that represents
the initial state of the component.</p>
<p>Usage:
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">motion</span> <span class="kn">import</span> <span class="n">Component</span>

<span class="n">MyComponent</span> <span class="o">=</span> <span class="n">Component</span><span class="p">(</span><span class="s2">&quot;MyComponent&quot;</span><span class="p">)</span>

<span class="nd">@MyComponent</span><span class="o">.</span><span class="n">init_state</span>
<span class="k">def</span> <span class="nf">setUp</span><span class="p">():</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
</code></pre></div></p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>func</code></td>
          <td>
                <code><span title="typing.Callable">Callable</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Function that initializes a state. Must return
a dictionary.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>Callable</code></td>          <td>
                <code><span title="typing.Callable">Callable</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Decorated init_state function.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="motion.Component.__call__" class="doc doc-heading">
          <code class="highlight language-python"><span class="fm">__call__</span><span class="p">(</span><span class="n">instance_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">init_state_params</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{},</span> <span class="n">logging_level</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;WARNING&#39;</span><span class="p">,</span> <span class="n">update_task_type</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;thread&#39;</span><span class="p">,</span> <span class="s1">&#39;process&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;thread&#39;</span><span class="p">,</span> <span class="n">disable_update_task</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">redis_socket_timeout</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">60</span><span class="p">,</span> <span class="n">config_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;.motionrc.yml&#39;</span><span class="p">,</span> <span class="n">flush_on_exit</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ComponentInstance</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Creates and returns a new instance of a Motion component.
See <code>ComponentInstance</code> docs for more info.</p>
<p>Usage:
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">motion</span> <span class="kn">import</span> <span class="n">Component</span>

<span class="n">MyComponent</span> <span class="o">=</span> <span class="n">Component</span><span class="p">(</span><span class="s2">&quot;MyComponent&quot;</span><span class="p">)</span>

<span class="nd">@MyComponent</span><span class="o">.</span><span class="n">init_state</span>
<span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="n">starting_val</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">starting_val</span><span class="p">}</span>

<span class="c1"># Define serve and update operations</span>
<span class="nd">@MyComponent</span><span class="o">.</span><span class="n">serve</span><span class="p">(</span><span class="s2">&quot;key1&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="o">...</span>

<span class="nd">@MyComponent</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="s2">&quot;key1)</span>
<span class="k">def</span> <span class="o">...</span>

<span class="c1"># Creates instance of MyComponent</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">c_instance</span> <span class="o">=</span> <span class="n">MyComponent</span><span class="p">(</span><span class="n">init_state_params</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;starting_val&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">})</span>
    <span class="n">c_instance</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="o">..</span><span class="p">)</span>
    <span class="n">c_instance</span><span class="o">.</span><span class="n">shutdown</span><span class="p">()</span>
</code></pre></div></p>
<p>You can also use component instances as context managers,
which is the recommended way to use them (because it will
automatically gracefully shut down the component instance
when the context manager exits):
<div class="highlight"><pre><span></span><code><span class="o">...</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="k">with</span> <span class="n">MyComponent</span><span class="p">(</span><span class="n">init_state_params</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;starting_val&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">})</span> <span class="k">as</span> <span class="n">c_instance</span><span class="p">:</span>
        <span class="n">c_instance</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="o">..</span><span class="p">)</span>
</code></pre></div></p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>instance_id</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>id of the component instance. Defaults to "" which will
generate a random id.</p>
            </div>
          </td>
          <td>
                <code>&#39;&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>init_state_params</code></td>
          <td>
                <code><span title="typing.Dict">Dict</span>[str, <span title="typing.Any">Any</span>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Parameters to pass into the init_state function. Defaults to {}.</p>
            </div>
          </td>
          <td>
                <code>{}</code>
          </td>
        </tr>
        <tr>
          <td><code>logging_level</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Logging level for the Motion logger. Uses the logging library.
Defaults to "WARNING".</p>
            </div>
          </td>
          <td>
                <code>&#39;WARNING&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>update_task_type</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Type of update task to use. Can be "thread" or "process".
"thread" has lower overhead but is not recommended for
CPU-intensive update operations. "process" is recommended
for CPU-intensive operations (e.g., fine-tuning a model)
but has higher startup overhead. Defaults to "thread".</p>
            </div>
          </td>
          <td>
                <code>&#39;thread&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>disable_update_task</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Whether or not to disable the component instance update ops.
Useful for printing out state values without running flows.
Defaults to False.</p>
            </div>
          </td>
          <td>
                <code>False</code>
          </td>
        </tr>
        <tr>
          <td><code>redis_socket_timeout</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Timeout for redis socket connections (seconds). Defaults to 60.
This means the redis connection will close if idle for 60 seconds.</p>
            </div>
          </td>
          <td>
                <code>60</code>
          </td>
        </tr>
        <tr>
          <td><code>config_path</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Path to config file of env vars. Defaults to ".motionrc.yml".</p>
            </div>
          </td>
          <td>
                <code>&#39;.motionrc.yml&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>flush_on_exit</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Whether or not to flush the update queue on exit/shutdown.
This is useful when running flows in serverless environments,
where you want to make sure all updates are finished after the
result is returned, before the function exits. Defaults to
False.</p>
            </div>
          </td>
          <td>
                <code>False</code>
          </td>
        </tr>
    </tbody>
  </table>
      <p>Returns:
    ComponentInstance: Component instance to run flows with.</p>

  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="motion.Component.save_state" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">save_state</span><span class="p">(</span><span class="n">func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Callable</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Decorator for the save_state function. This function
saves the state of the component to be accessible in
future component instances of the same name.</p>
<p>Usage:
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">motion</span> <span class="kn">import</span> <span class="n">Component</span>

<span class="n">MyComponent</span> <span class="o">=</span> <span class="n">Component</span><span class="p">(</span><span class="s2">&quot;MyComponent&quot;</span><span class="p">)</span>

<span class="nd">@c</span><span class="o">.</span><span class="n">save_state</span>
<span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="n">state</span><span class="p">):</span>
    <span class="c1"># state might have other unpicklable keys, like a DB connection</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;fit_count&quot;</span><span class="p">:</span> <span class="n">state</span><span class="p">[</span><span class="s2">&quot;fit_count&quot;</span><span class="p">]}</span>
</code></pre></div></p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>func</code></td>
          <td>
                <code><span title="typing.Callable">Callable</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Function that returns a cloudpickleable object.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>Callable</code></td>          <td>
                <code><span title="typing.Callable">Callable</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Decorated save_state function.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="motion.Component.load_state" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">load_state</span><span class="p">(</span><span class="n">func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Callable</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Decorator for the load_state function. This function
loads the state of the component from the unpickled state.</p>
<p>Usage:
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">motion</span> <span class="kn">import</span> <span class="n">Component</span>

<span class="n">MyComponent</span> <span class="o">=</span> <span class="n">Component</span><span class="p">(</span><span class="s2">&quot;MyComponent&quot;</span><span class="p">)</span>

<span class="nd">@c</span><span class="o">.</span><span class="n">load_state</span>
<span class="k">def</span> <span class="nf">load</span><span class="p">(</span><span class="n">state</span><span class="p">):</span>
    <span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">&quot;:memory:&quot;</span><span class="p">)</span>
    <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;cursor&quot;</span><span class="p">:</span> <span class="n">cursor</span><span class="p">,</span> <span class="s2">&quot;fit_count&quot;</span><span class="p">:</span> <span class="n">state</span><span class="p">[</span><span class="s2">&quot;fit_count&quot;</span><span class="p">]}</span>
</code></pre></div></p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>func</code></td>
          <td>
                <code><span title="typing.Callable">Callable</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Function that consumes a cloudpickleable object.
Should return a dictionary representing the state of the
component instance.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>Callable</code></td>          <td>
                <code><span title="typing.Callable">Callable</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Decorated load_state function.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

  </div>

</div>



  </div>

  </div>


</div>

<div class="doc doc-object doc-class">



<h2 id="motion.DiscardPolicy" class="doc doc-heading">
          <code>DiscardPolicy</code>


</h2>


  <div class="doc doc-contents first">
          <p class="doc doc-class-bases">
            Bases: <code><span title="enum.Enum">Enum</span></code></p>

  
      <p>Defines the policy for discarding items in an update operation's queue.
Each component instance has a queue for each update operation. Items in
the queue are processed in first-in-first-out (FIFO) order, and items
in the queue can delete based on the discard policy set by the
developer.</p>



  <p><strong>Attributes:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code><a class="autorefs autorefs-internal" title="motion.DiscardPolicy.NONE" href="#motion.DiscardPolicy.NONE">NONE</a></code></td>
          <td>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Indicates no discard policy. Items in the queue do not delete.</p>
            </div>
          </td>
        </tr>
        <tr>
          <td><code><a class="autorefs autorefs-internal" title="motion.DiscardPolicy.NUM_NEW_UPDATES" href="#motion.DiscardPolicy.NUM_NEW_UPDATES">NUM_NEW_UPDATES</a></code></td>
          <td>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Items delete based on the number of new updates. Once
the number of new updates exceeds a certain threshold, the oldest
items are removed.</p>
            </div>
          </td>
        </tr>
        <tr>
          <td><code><a class="autorefs autorefs-internal" title="motion.DiscardPolicy.SECONDS" href="#motion.DiscardPolicy.SECONDS">SECONDS</a></code></td>
          <td>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Items delete based on time. Items older than a specified
number of seconds at the time of processing are removed.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>
      <p>Use the <code>discard_after</code> and <code>discard_policy</code> arguments in <code>Component.update</code>
decorator to set the discard policy for an update operation.</p>
<p>Example Usage:
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">motion</span> <span class="kn">import</span> <span class="n">Component</span><span class="p">,</span> <span class="n">DiscardPolicy</span>

<span class="n">C</span> <span class="o">=</span> <span class="n">Component</span><span class="p">(</span><span class="s2">&quot;C&quot;</span><span class="p">)</span>

<span class="nd">@C</span><span class="o">.</span><span class="n">init_state</span>
<span class="k">def</span> <span class="nf">setup</span><span class="p">():</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;default_value&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;some_value&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;another_value&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>

<span class="nd">@C</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
    <span class="s2">&quot;something&quot;</span><span class="p">,</span>
    <span class="n">discard_after</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
    <span class="n">discard_policy</span><span class="o">=</span><span class="n">DiscardPolicy</span><span class="o">.</span><span class="n">NUM_NEW_UPDATES</span>
<span class="p">)</span>
<span class="k">def</span> <span class="nf">update_num_new</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">props</span><span class="p">):</span>
    <span class="c1"># Do an expensive operation that could take a while</span>
    <span class="o">...</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;some_value&quot;</span><span class="p">:</span> <span class="n">state</span><span class="p">[</span><span class="s2">&quot;some_value&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">props</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">]}</span>

<span class="nd">@C</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="s2">&quot;something&quot;</span><span class="p">,</span> <span class="n">discard_after</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">discard_policy</span><span class="o">=</span><span class="n">DiscardPolicy</span><span class="o">.</span><span class="n">SECONDS</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">update_seconds</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">props</span><span class="p">):</span>
    <span class="c1"># Do an expensive operation that could take a while</span>
    <span class="o">...</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;another_value&quot;</span><span class="p">:</span> <span class="n">state</span><span class="p">[</span><span class="s2">&quot;another_value&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">props</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">]}</span>

<span class="nd">@C</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="s2">&quot;something&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">update_default</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">props</span><span class="p">):</span>
    <span class="c1"># Do an expensive operation that could take a while</span>
    <span class="o">...</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;default_value&quot;</span><span class="p">:</span> <span class="n">state</span><span class="p">[</span><span class="s2">&quot;default_value&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">props</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">]}</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">c</span> <span class="o">=</span> <span class="n">C</span><span class="p">()</span>

    <span class="c1"># If we do many runs of &quot;something&quot;, the update queue will grow</span>
    <span class="c1"># and the policy will be automatically enforced by Motion.</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
        <span class="n">c</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;something&quot;</span><span class="p">,</span> <span class="n">props</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)})</span>

    <span class="c1"># Flush the update queue (i.e., wait for all updates to finish)</span>
    <span class="n">c</span><span class="o">.</span><span class="n">flush_update</span><span class="p">(</span><span class="s2">&quot;something&quot;</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">read_state</span><span class="p">(</span><span class="s2">&quot;default_value&quot;</span><span class="p">))</span> <span class="c1"># (1)!</span>

    <span class="nb">print</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">read_state</span><span class="p">(</span><span class="s2">&quot;some_value&quot;</span><span class="p">))</span> <span class="c1"># (2)!</span>

    <span class="nb">print</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">read_state</span><span class="p">(</span><span class="s2">&quot;another_value&quot;</span><span class="p">))</span> <span class="c1"># (3)!</span>

    <span class="n">c</span><span class="o">.</span><span class="n">shutdown</span><span class="p">()</span>
</code></pre></div></p>
<ol>
<li>
<p>The default policy is to not delete any items (DiscardPolicy.NONE), so
the value of <code>default_value</code> will be the sum of all the values passed to
<code>run</code> (i.e., <code>sum(range(100))</code>).</p>
</li>
<li>
<p>The NUM_NEW_UPDATES policy will delete items in the queue once the
number of new updates exceeds a certain threshold. The threshold is set by
the <code>discard_after</code> argument in the <code>update</code> decorator. So the result will
be &lt; 4950 because the NUM_NEW_UPDATES policy will have deleted some items.</p>
</li>
<li>
<p>This will be &lt; 4950 because the SECONDS policy will have deleted some
items (only whatever updates could have been processed in the second after
they were added to the queue).</p>
</li>
</ol>


  

  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="motion.DiscardPolicy.NONE" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">NONE</span> <span class="o">=</span> <span class="mi">0</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>No discard policy. Does not discard items in the queue.</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="motion.DiscardPolicy.NUM_NEW_UPDATES" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">NUM_NEW_UPDATES</span> <span class="o">=</span> <span class="mi">1</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Delete items based on the number of new updates enqueued.</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="motion.DiscardPolicy.SECONDS" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">SECONDS</span> <span class="o">=</span> <span class="mi">2</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Delete items based on time (in seconds).</p>
  </div>

</div>





  </div>

  </div>


</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "navigation.expand", "navigation.path", "toc.follow", "header.autohide", "content.code.copy", "content.code.annotate"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.c8d2eff1.min.js"></script>
      
    
  </body>
</html>